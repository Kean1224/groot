(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{9304:(e,s,t)=>{Promise.resolve().then(t.bind(t,9598))},9598:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(5155),l=t(2115);function c(){let[e,s]=(0,l.useState)([]),[t,c]=(0,l.useState)(!0),[n,i]=(0,l.useState)(""),[r,o]=(0,l.useState)(""),d=async()=>{if(r){c(!0),i("");try{let e=await fetch("".concat("http://localhost:5000/api","/invoices/buyer/").concat(encodeURIComponent(r)));if(!e.ok)throw Error("No invoices found");let t=await e.json();s(t)}catch(e){i(e.message||"Failed to fetch invoices"),s([])}finally{c(!1)}}};return(0,a.jsxs)("main",{className:"max-w-3xl mx-auto p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6 text-yellow-600",children:"Buyer Invoices"}),(0,a.jsxs)("div",{className:"mb-4 flex gap-2 items-center",children:[(0,a.jsx)("input",{type:"email",placeholder:"Enter your buyer email",value:r,onChange:e=>o(e.target.value),className:"border px-3 py-2 rounded w-full"}),(0,a.jsx)("button",{onClick:d,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"View"}),(0,a.jsx)("button",{onClick:()=>{r&&window.open("".concat("http://localhost:5000/api","/invoices/buyer/").concat(encodeURIComponent(r),"/pdf"),"_blank")},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",disabled:!e.length,children:"Download PDF"})]}),t&&(0,a.jsx)("p",{children:"Loading..."}),n&&(0,a.jsx)("p",{className:"text-red-500",children:n}),!t&&!n&&e.length>0&&(0,a.jsxs)("table",{className:"w-full border text-sm mt-4",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"p-2",children:"Auction"}),(0,a.jsx)("th",{className:"p-2",children:"Lot"}),(0,a.jsx)("th",{className:"p-2",children:"Item"}),(0,a.jsx)("th",{className:"p-2",children:"Seller"}),(0,a.jsx)("th",{className:"p-2",children:"Total Paid"}),(0,a.jsx)("th",{className:"p-2",children:"Base Amount"}),(0,a.jsx)("th",{className:"p-2",children:"Date"})]})}),(0,a.jsx)("tbody",{children:e.map((e,s)=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"p-2",children:e.auctionTitle}),(0,a.jsx)("td",{className:"p-2",children:e.lotNumber}),(0,a.jsx)("td",{className:"p-2",children:e.item}),(0,a.jsx)("td",{className:"p-2",children:e.sellerEmail}),(0,a.jsxs)("td",{className:"p-2",children:["R",e.amount]}),(0,a.jsxs)("td",{className:"p-2",children:["R",e.baseAmount]}),(0,a.jsx)("td",{className:"p-2",children:new Date(e.date).toLocaleString()})]},s))})]}),!t&&!n&&!e.length&&(0,a.jsx)("p",{className:"text-gray-500 mt-4",children:"No invoices found for this buyer."})]})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=9304)),_N_E=e.O()}]);