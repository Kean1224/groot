(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[814],{4209:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),c=s(2115);function d(){let[e,t]=(0,c.useState)([]),[s,d]=(0,c.useState)(!0),[l,n]=(0,c.useState)(""),[i,r]=(0,c.useState)("");(0,c.useEffect)(()=>{fetch("".concat("http://localhost:5000/api","/refunds/"),{credentials:"include"}).then(e=>e.json()).then(e=>{t(e),d(!1)}).catch(()=>{n("Failed to load refund requests."),d(!1)})},[]);let o=async(e,s,a)=>{r("");try{(await fetch("".concat("http://localhost:5000/api","/refunds/").concat(e,"/").concat(encodeURIComponent(s)),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:a})})).ok?(t(t=>t.map(t=>t.auctionId===e&&t.email===s?{...t,status:a}:t)),r("✅ Updated")):r("❌ Failed to update")}catch(e){r("❌ Failed to update")}};return(0,a.jsxs)("main",{className:"max-w-3xl mx-auto p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6 text-yellow-700",children:"Deposit Refund Requests"}),s?(0,a.jsx)("p",{children:"Loading..."}):l?(0,a.jsx)("p",{className:"text-red-600",children:l}):(0,a.jsxs)("table",{className:"w-full border text-sm bg-white rounded shadow",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-yellow-100",children:[(0,a.jsx)("th",{className:"p-2",children:"Auction ID"}),(0,a.jsx)("th",{className:"p-2",children:"Buyer Email"}),(0,a.jsx)("th",{className:"p-2",children:"Status"}),(0,a.jsx)("th",{className:"p-2",children:"Requested At"}),(0,a.jsx)("th",{className:"p-2",children:"Updated At"}),(0,a.jsx)("th",{className:"p-2",children:"Action"})]})}),(0,a.jsx)("tbody",{children:e.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"p-2",children:e.auctionId}),(0,a.jsx)("td",{className:"p-2",children:e.email}),(0,a.jsx)("td",{className:"p-2 font-bold",children:e.status}),(0,a.jsx)("td",{className:"p-2",children:new Date(e.requestedAt).toLocaleString()}),(0,a.jsx)("td",{className:"p-2",children:e.updatedAt?new Date(e.updatedAt).toLocaleString():"-"}),(0,a.jsxs)("td",{className:"p-2",children:["pending"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"bg-green-600 text-white px-2 py-1 rounded mr-2 hover:bg-green-700",onClick:()=>o(e.auctionId,e.email,"approved"),children:"Approve"}),(0,a.jsx)("button",{className:"bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>o(e.auctionId,e.email,"rejected"),children:"Reject"})]}),"pending"!==e.status&&(0,a.jsx)("span",{className:"text-gray-500",children:"-"})]})]},e.auctionId+e.email+t))})]}),i&&(0,a.jsx)("p",{className:"mt-4 text-blue-700",children:i})]})}},7697:(e,t,s)=>{Promise.resolve().then(s.bind(s,4209))}},e=>{e.O(0,[441,964,358],()=>e(e.s=7697)),_N_E=e.O()}]);