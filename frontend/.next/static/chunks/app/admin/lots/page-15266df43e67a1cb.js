(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[251],{1168:(e,l,t)=>{Promise.resolve().then(t.bind(t,3474))},2572:(e,l,t)=>{"use strict";t.d(l,{A:()=>o});var a=t(5155),s=t(6874),n=t.n(s),r=t(5695);let i=[{href:"/admin/dashboard",label:"Dashboard"},{href:"/admin/auctions",label:"Auctions"},{href:"/admin/lots",label:"Lots"},{href:"/admin/users",label:"Users"},{href:"/admin/invoices",label:"Invoices"},{href:"/admin/assign-seller",label:"Assign Seller"}];function o(){let e=(0,r.usePathname)();return(0,a.jsxs)("aside",{className:"bg-yellow-100 border-r border-yellow-300 min-h-screen w-56 p-6 flex flex-col gap-4 sticky top-0",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-yellow-700 mb-4",children:"Admin Panel"}),(0,a.jsx)("nav",{className:"flex flex-col gap-2",children:i.map(l=>(0,a.jsx)(n(),{href:l.href,className:"px-3 py-2 rounded font-semibold transition-all text-yellow-800 hover:bg-yellow-200 ".concat(e===l.href?"bg-yellow-300":""),children:l.label},l.href))})]})}},3474:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>r});var a=t(5155),s=t(2115),n=t(2572);function r(){let[e,l]=(0,s.useState)([]),[t,r]=(0,s.useState)([]),[i,o]=(0,s.useState)(""),[c,d]=(0,s.useState)({title:"",description:"",startPrice:"",bidIncrement:"",endTime:"",image:null,sellerEmail:"",sellerSearch:"",condition:"Good"});(0,s.useEffect)(()=>{m(),u()},[]);let m=async()=>{let e=await fetch("".concat("http://localhost:5000/api","/auctions"));l(await e.json())},u=async()=>{let e=await fetch("".concat("http://localhost:5000/api","/users"));r((await e.json()).filter(e=>"admin"!==e.role&&!e.suspended))},h=async e=>{if(e.preventDefault(),!i||!c.title||!c.startPrice)return;let l=new FormData;l.append("title",c.title),l.append("description",c.description),l.append("startPrice",c.startPrice),c.endTime&&l.append("endTime",c.endTime),c.bidIncrement&&l.append("bidIncrement",c.bidIncrement),c.image&&l.append("image",c.image),c.sellerEmail&&l.append("sellerEmail",c.sellerEmail),c.condition&&l.append("condition",c.condition),await fetch("".concat("http://localhost:5000/api","/lots/").concat(i),{method:"POST",body:l}),d({title:"",description:"",startPrice:"",bidIncrement:"",endTime:"",image:null,sellerEmail:"",sellerSearch:"",condition:"Good"}),c.condition,m()},x=async(e,l,t,a)=>{confirm("Are you sure you want to delete Lot".concat(t?" "+t:""," from Auction").concat(a?" '"+a+"'":"","?"))&&(await fetch("".concat("http://localhost:5000/api","/lots/").concat(e,"/").concat(l),{method:"DELETE"}),m())};return(0,a.jsxs)("div",{className:"flex min-h-screen",children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("main",{className:"flex-1 px-8 py-8 bg-white",children:(0,a.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6 text-yellow-600",children:"Lot Management"}),(0,a.jsxs)("form",{onSubmit:h,className:"bg-white p-4 rounded shadow space-y-4 mb-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Assign Seller"}),(0,a.jsx)("input",{type:"text",placeholder:"Search seller by name or email",value:c.sellerSearch,onChange:e=>d({...c,sellerSearch:e.target.value}),className:"w-full border px-4 py-2 rounded mb-2"}),(0,a.jsxs)("select",{required:!0,value:c.sellerEmail,onChange:e=>{d({...c,sellerEmail:e.target.value}),e.target.blur()},className:"w-full border px-4 py-2 rounded",children:[(0,a.jsx)("option",{value:"",children:"No seller (admin-owned)"},"no-seller"),t.filter(e=>e.name.toLowerCase().includes(c.sellerSearch.toLowerCase())||e.email.toLowerCase().includes(c.sellerSearch.toLowerCase())).map(e=>(0,a.jsxs)("option",{value:e.email,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Select Auction"}),(0,a.jsxs)("select",{required:!0,value:i,onChange:e=>{o(e.target.value),e.target.blur()},className:"w-full border px-4 py-2 rounded",children:[(0,a.jsx)("option",{value:"",children:"-- Choose --"},"choose-auction"),e.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Title"}),(0,a.jsx)("input",{type:"text",required:!0,value:c.title,onChange:e=>d({...c,title:e.target.value}),className:"w-full border px-4 py-2 rounded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Description"}),(0,a.jsx)("textarea",{value:c.description,onChange:e=>d({...c,description:e.target.value}),className:"w-full border px-4 py-2 rounded"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Start Price (R)"}),(0,a.jsx)("input",{type:"number",required:!0,value:c.startPrice,onChange:e=>d({...c,startPrice:e.target.value}),className:"w-full border px-4 py-2 rounded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Bid Increment (R)"}),(0,a.jsx)("input",{type:"number",required:!0,min:1,value:c.bidIncrement,onChange:e=>d({...c,bidIncrement:e.target.value}),className:"w-full border px-4 py-2 rounded",placeholder:"e.g. 10, 50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"End Time (optional)"}),(0,a.jsx)("input",{type:"datetime-local",value:c.endTime,onChange:e=>d({...c,endTime:e.target.value}),className:"w-full border px-4 py-2 rounded"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Image (optional)"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var l;return d({...c,image:(null==(l=e.target.files)?void 0:l[0])||null})},className:"w-full"})]}),(0,a.jsx)("button",{type:"submit",className:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600",children:"âž• Add Lot"})]}),e.map(e=>{var l;return(0,a.jsxs)("div",{className:"mb-8 bg-white p-4 rounded shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-2",children:e.title}),(null==(l=e.lots)?void 0:l.length)===0?(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No lots yet."}):(0,a.jsx)("ul",{className:"space-y-2",children:e.lots.map(l=>(0,a.jsx)("li",{className:"border-b pb-2",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:l.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Condition: ",l.condition||"Good"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["R",l.startPrice]}),l.image&&(0,a.jsx)("img",{src:l.image,alt:l.title,className:"w-24 h-16 object-cover mt-1 rounded"}),l.sellerEmail&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Seller: ",l.sellerEmail]})]}),(0,a.jsx)("button",{onClick:()=>x(e.id,l.id,l.lotNumber,e.title),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",children:"Delete"})]})},l.id))})]},e.id)})]})})]})}},5695:(e,l,t)=>{"use strict";var a=t(8999);t.o(a,"useParams")&&t.d(l,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(l,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(l,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(l,{useSearchParams:function(){return a.useSearchParams}})}},e=>{e.O(0,[874,441,964,358],()=>e(e.s=1168)),_N_E=e.O()}]);