(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[638],{2572:(e,s,l)=>{"use strict";l.d(s,{A:()=>o});var a=l(5155),t=l(6874),n=l.n(t),r=l(5695);let i=[{href:"/admin/dashboard",label:"Dashboard"},{href:"/admin/auctions",label:"Auctions"},{href:"/admin/lots",label:"Lots"},{href:"/admin/users",label:"Users"},{href:"/admin/invoices",label:"Invoices"},{href:"/admin/assign-seller",label:"Assign Seller"}];function o(){let e=(0,r.usePathname)();return(0,a.jsxs)("aside",{className:"bg-yellow-100 border-r border-yellow-300 min-h-screen w-56 p-6 flex flex-col gap-4 sticky top-0",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-yellow-700 mb-4",children:"Admin Panel"}),(0,a.jsx)("nav",{className:"flex flex-col gap-2",children:i.map(s=>(0,a.jsx)(n(),{href:s.href,className:"px-3 py-2 rounded font-semibold transition-all text-yellow-800 hover:bg-yellow-200 ".concat(e===s.href?"bg-yellow-300":""),children:s.label},s.href))})]})}},5373:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>r});var a=l(5155),t=l(2115),n=l(2572);function r(){let[e,s]=(0,t.useState)([]),[l,r]=(0,t.useState)([]),[i,o]=(0,t.useState)([]),[d,c]=(0,t.useState)(""),[h,m]=(0,t.useState)(""),[u,x]=(0,t.useState)(""),[b,f]=(0,t.useState)("");(0,t.useEffect)(()=>{fetch("/api/auctions").then(e=>e.json()).then(s),fetch("/api/users").then(e=>e.json()).then(e=>o(e.filter(e=>"admin"!==e.role&&!e.suspended)))},[]),(0,t.useEffect)(()=>{d?fetch("/api/lots/".concat(d)).then(e=>e.json()).then(r):r([])},[d]);let p=async()=>{d&&h&&u&&(f(""),(await fetch("/api/lots/".concat(d,"/").concat(h,"/assign-seller"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sellerEmail:u})})).ok?(f("✅ Seller assigned!"),r(e=>e.map(e=>e.id===h?{...e,sellerEmail:u}:e))):f("❌ Failed to assign seller"))};return(0,a.jsxs)("div",{className:"flex min-h-screen",children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("main",{className:"flex-1 px-8 py-8 bg-white",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6 text-yellow-600",children:"Assign Seller to Lot"}),(0,a.jsxs)("div",{className:"space-y-4 bg-white p-4 rounded shadow mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Auction"}),(0,a.jsxs)("select",{value:d,onChange:e=>{c(e.target.value),m("")},className:"w-full border px-3 py-2 rounded",children:[(0,a.jsx)("option",{value:"",children:"-- Select Auction --"}),e.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Lot"}),(0,a.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"w-full border px-3 py-2 rounded",disabled:!d,children:[(0,a.jsx)("option",{value:"",children:"-- Select Lot --"}),l.map(e=>(0,a.jsxs)("option",{value:e.id,children:["Lot ",e.lotNumber||"?",": ",e.title]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Seller"}),(0,a.jsxs)("select",{value:u,onChange:e=>x(e.target.value),className:"w-full border px-3 py-2 rounded",disabled:!h,children:[(0,a.jsx)("option",{value:"",children:"-- Select Seller --"}),i.map(e=>(0,a.jsxs)("option",{value:e.email,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,a.jsx)("button",{onClick:p,className:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 mt-2",disabled:!d||!h||!u,children:"Assign Seller"}),b&&(0,a.jsx)("div",{className:"mt-2 text-sm",children:b})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Current Assignments"}),0===l.length?(0,a.jsx)("p",{className:"text-gray-500",children:"No lots found."}):(0,a.jsx)("ul",{className:"space-y-2",children:l.map(e=>(0,a.jsxs)("li",{className:"border-b pb-2 flex justify-between items-center",children:[(0,a.jsxs)("span",{children:["Lot ",e.lotNumber||"?",": ",e.title]}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Seller: ",e.sellerEmail||(0,a.jsx)("span",{className:"text-red-500",children:"Unassigned"})]})]},e.id))})]})]})})]})}},5695:(e,s,l)=>{"use strict";var a=l(8999);l.o(a,"useParams")&&l.d(s,{useParams:function(){return a.useParams}}),l.o(a,"usePathname")&&l.d(s,{usePathname:function(){return a.usePathname}}),l.o(a,"useRouter")&&l.d(s,{useRouter:function(){return a.useRouter}}),l.o(a,"useSearchParams")&&l.d(s,{useSearchParams:function(){return a.useSearchParams}})},7745:(e,s,l)=>{Promise.resolve().then(l.bind(l,5373))}},e=>{e.O(0,[874,441,964,358],()=>e(e.s=7745)),_N_E=e.O()}]);