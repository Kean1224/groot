(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{1186:(e,t,s)=>{Promise.resolve().then(s.bind(s,1360))},1360:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(5155),n=s(2115),l=s(2572);function i(){let[e,t]=(0,n.useState)([]),[s,i]=(0,n.useState)({title:"",location:"",startTime:"",endTime:"",increment:1,depositRequired:!1,depositAmount:0}),r=async()=>{let e=await fetch("/api/auctions");t(await e.json())};(0,n.useEffect)(()=>{r()},[]);let o=async e=>{e.preventDefault(),await fetch("/api/auctions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),i({title:"",location:"",startTime:"",endTime:"",increment:1,depositRequired:!1,depositAmount:0}),r()},c=async e=>{confirm("Are you sure you want to delete this auction?")&&(await fetch("/api/auctions/".concat(e),{method:"DELETE"}),r())};return(0,a.jsxs)("div",{className:"flex min-h-screen",children:[(0,a.jsx)(l.A,{}),(0,a.jsx)("main",{className:"flex-1 px-8 py-8 bg-white",children:(0,a.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6 text-yellow-600",children:"Auction Manager"}),(0,a.jsxs)("form",{onSubmit:o,className:"bg-white p-4 rounded shadow mb-8 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Title"}),(0,a.jsx)("input",{type:"text",required:!0,value:s.title,onChange:e=>i({...s,title:e.target.value}),className:"w-full border px-4 py-2 rounded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Location"}),(0,a.jsx)("input",{type:"text",value:s.location,onChange:e=>i({...s,location:e.target.value}),className:"w-full border px-4 py-2 rounded"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Start Time"}),(0,a.jsx)("input",{type:"datetime-local",required:!0,value:s.startTime,onChange:e=>i({...s,startTime:e.target.value}),className:"w-full border px-4 py-2 rounded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"End Time"}),(0,a.jsx)("input",{type:"datetime-local",required:!0,value:s.endTime,onChange:e=>i({...s,endTime:e.target.value}),className:"w-full border px-4 py-2 rounded"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Bid Increment (R)"}),(0,a.jsx)("input",{type:"number",required:!0,value:s.increment,onChange:e=>i({...s,increment:Number(e.target.value)}),className:"w-full border px-4 py-2 rounded"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:s.depositRequired,onChange:e=>i({...s,depositRequired:e.target.checked}),className:"form-checkbox"}),"Deposit Required"]}),s.depositRequired&&(0,a.jsx)("input",{type:"number",min:0,value:s.depositAmount,onChange:e=>i({...s,depositAmount:Number(e.target.value)}),placeholder:"Deposit Amount (R)",className:"border px-2 py-1 rounded w-40",required:!0})]}),(0,a.jsx)("button",{type:"submit",className:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 mt-2",children:"âž• Create Auction"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Existing Auctions"}),0===e.length?(0,a.jsx)("p",{children:"No auctions found."}):(0,a.jsx)("ul",{className:"space-y-4",children:e.map(e=>(0,a.jsx)("li",{className:"border-b pb-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Location: ",e.location]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["From: ",new Date(e.startTime).toLocaleString()]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["To: ",new Date(e.endTime).toLocaleString()]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Increment: R",e.increment]}),e.depositRequired&&(0,a.jsxs)("p",{className:"text-sm text-red-600 font-semibold",children:["Deposit Required: R",e.depositAmount]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:items-end",children:[(0,a.jsx)("button",{onClick:()=>c(e.id),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",children:"Delete"}),(0,a.jsx)("button",{onClick:async()=>{if(confirm("End this auction? This will notify winners and sellers and cannot be undone."))try{let t=await fetch("".concat("http://localhost:5000/api","/lots/").concat(e.id,"/end"),{method:"POST"}),s=await t.json();t.ok?alert("Auction ended. Notifications sent."):alert("Failed to end auction: "+(s.error||"Unknown error"))}catch(e){alert("Failed to end auction.")}},className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",children:"End Auction"}),(0,a.jsx)("button",{onClick:async()=>{let t=prompt("Enter new start date/time (YYYY-MM-DDTHH:mm):");if(!t)return;let s=prompt("Enter new end date/time (YYYY-MM-DDTHH:mm):");if(s)try{let a=await fetch("/api/auctions/".concat(e.id,"/rerun"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startTime:t,endTime:s})});if(a.ok)alert("Auction rerun created!"),r();else{let e=await a.json();alert("Failed to rerun auction: "+(e.error||"Unknown error"))}}catch(e){alert("Failed to rerun auction.")}},className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Rerun"})]})]})},e.id))})]})]})})]})}},2572:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(5155),n=s(6874),l=s.n(n),i=s(5695);let r=[{href:"/admin/dashboard",label:"Dashboard"},{href:"/admin/auctions",label:"Auctions"},{href:"/admin/lots",label:"Lots"},{href:"/admin/users",label:"Users"},{href:"/admin/invoices",label:"Invoices"},{href:"/admin/assign-seller",label:"Assign Seller"}];function o(){let e=(0,i.usePathname)();return(0,a.jsxs)("aside",{className:"bg-yellow-100 border-r border-yellow-300 min-h-screen w-56 p-6 flex flex-col gap-4 sticky top-0",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-yellow-700 mb-4",children:"Admin Panel"}),(0,a.jsx)("nav",{className:"flex flex-col gap-2",children:r.map(t=>(0,a.jsx)(l(),{href:t.href,className:"px-3 py-2 rounded font-semibold transition-all text-yellow-800 hover:bg-yellow-200 ".concat(e===t.href?"bg-yellow-300":""),children:t.label},t.href))})]})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},e=>{e.O(0,[874,441,964,358],()=>e(e.s=1186)),_N_E=e.O()}]);